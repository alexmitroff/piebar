from scipy.stats import ttest_ind, f_oneway
from statsmodels.stats.multicomp import pairwise_tukeyhsd
from statsmodels.stats.multicomp import MultiComparison
import numpy as np

groups = ['pie', 'horizontal', 'vertical', 'doughnut']

exp2__fix_dur = [
    [244459.44839396243, 239719.98089030746, 235248.10660423886, 243240.8540904118, 241162.8937207561],
    [236021.57264837014, 223733.46876438192, 232473.86215580677, 239000.76257976823, 222194.43863371035],
    [261912.79796576092, 282655.4253731157, 242244.00699463065, 238724.11805015625, 229382.88456496518],
    [259334.85022054389, 231443.4671888765, 222203.76859371233, 249790.23750188109, 225397.48433771112]
]


exp2__fix_count = [
    [52.470588235294116, 46.44117647058823, 35.23529411764706, 44.05882352941177, 61.38235294117647],
    [35.78787878787879, 34.75757575757576, 41.303030303030305, 31.12121212121212, 39.39393939393939],
    [29.96969696969697, 31.28125, 37.40625, 30.333333333333332, 30.0],
    [32.5, 28.1, 35.7, 29.0, 45.77777777777778]
]

exp2__saccade_count = [
    [59.76470588235294, 56.470588235294116, 39.529411764705884, 48.294117647058826, 68.6470588235294],
    [40.84848484848485, 38.84848484848485, 48.72727272727273, 33.93939393939394, 45.303030303030305],
    [34.878787878787875, 35.39393939393939, 42.375, 36.45454545454545, 34.125],
    [35.6, 32.55555555555556, 46.1, 31.9, 45.888888888888886]
]


exp3__fix_dur = [
    [227076.3595675144, 217347.47445054943, 248705.44444123172, 234164.92098587684, 208917.05768076517],
    [212946.65164112207, 178018.73332307063, 198094.9817331855, 193937.01975518675, 211523.34683397893],
    [172726.09320853563, 195988.33386368712, 206793.807167314, 214061.40735401196, 205564.15885371433],
    [237373.35550429177, 204794.85739680775, 231275.3781027311, 237263.84188948307, 215916.2934294519]
]

exp3__fix_count = [
    [59.0, 46.75, 63.0, 69.0, 74.25],
    [52.0, 47.75, 31.75, 40.25, 49.75],
    [29.0, 43.25, 36.333333333333336, 51.5, 49.5],
    [52.25, 39.75, 62.25, 29.25, 56.0]
]

exp3__saccade_count = [
    [56.5, 46.75, 64.5, 70.75, 78.25],
    [59.5, 47.5, 36.5, 42.5, 52.0],
    [35.5, 47.75, 35.333333333333336, 49.75, 51.5],
    [59.25, 45.5, 62.25, 29.25, 55.25]
]


def calc_p_value(exp1, exp2):
    i = 0
    for group in exp1:
        ttest = ttest_ind(group, exp2[i])
        print(f'{i+1}: ', ttest.pvalue)
        i += 1

def mean_calcs(exp):
    values = [np.mean(group) for group in exp]
    i = 1
    for value1 in values:
        j = i+1
        for value2 in values[i:]:
            diff = value2 - value1
            print(f'v{j}-v{i}=', diff)
            j += 1
        i += 1

def anova(exp):
    f, p = f_oneway(*exp)
    print('One-way ANOVA')
    print('=============')

    print('F value:', f)
    print('P value:', p, '\n')

def tukey(exp):
    mc = MultiComparison(exp, groups)
    result = mc.tukeyhsd()

    print(result)
    print(mc.groupsunique)

# calc_p_value(exp2__saccade_count, exp3__saccade_count)
# mean_calcs(exp3__saccade_count)
# anova(exp2__fix_dur)